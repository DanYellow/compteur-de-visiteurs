{% extends "layouts/page.njk" %}
{% import "includes/forms.njk" as forms %}

{% block title %}
Compteur de visiteurs
{% endblock %}
{% block scripts %}
    <script type="module" src="/src/assets/scripts/sign-in-form.ts" defer></script>
    <script type="module" src="/src/assets/scripts/terms-of-service.ts" defer></script>
{% endblock %}
{% block content %}
    <div class="mt-8 px-3 flex flex-row justify-center gap-24">
        <form class="w-3xl" novalidate action="" method="post" data-sign-in-form>
            <header class="mb-6">
                <img src="/images/faclab-logo-light.svg" class="w-20" alt="">
            </header>
            <div class="flex flex-col col-span-full gap-3">
                <div class="mb-11">
                    <p class="title-font leading-none text-7xl uppercase">À quel(s) groupe(s)<br /><span class="text-green-numixs">appartenez-vous</span> ?</p>
                    <p class="text-sm opacity-70 -mt-1">Vous devez choisir au moins un secteur</p>
                </div>
                <ul class="form-errors-list-container col-span-full" role="alert" data-form-errors id="error-container"></ul>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-14 gap-y-7">
                    {% for sector in list_business_sector %}
                        {% set children = null %}
                        {% if sector.value == "entreprise" %}
                            {% set children %}
                            <div data-input-switch-toggle-recipient="entreprise">
                                <div class="ml-12 flex flex-col gap-3 mt-2">
                                    <label for="station_numixs">
                                        <input type="radio" class="accent-green-numixs" name="entreprise_type" id="station_numixs">
                                        Station Numixs
                                    </label>
                                    <label for="externe">
                                        <input type="radio" class="accent-green-numixs" name="entreprise_type" id="externe">
                                        Externe
                                    </label>
                                </div>
                            </div>
                            {% endset %}
                        {% endif %}
                        {{ forms.switch(sector.name, sector.value, value = "oui", color = "peer-checked:bg-green-numixs", ring_color = "peer-focus:ring-dark-green-numixs/30", child = children) }}
                    {% endfor %}
                </div>
            </div>

            <div class="mt-7">
                <button type="submit" class="text-green-numixs inline-flex w-fit title-font rounded-md text-2xl gap-2.5 py-3.5 font-bold hocus:text-white items-center">
                    Envoyer
                    {% include "includes/next-arrow.svg" %}
                </button>
            </div>
        </form>
        <img class="hidden lg:block" src="/images/compteur-deco-image.png" alt="">
    </div>

    <dialog data-dialog="form-submitted" class="backdrop:bg-[#F5F5F5] m-auto max-w-2xl w-full bg-transparent ">
        <div class="flex gap-2 flex-col py-4">
            <img src="/images/faclab-logo.svg" class="w-44 mx-auto block" alt="">
            <div class="flex justify-center flex-col items-center" data-swap-content>
                <img src="/images/loading.svg" class="animate-spin w-16" alt="">
            </div>
        </div>
    </dialog>
    <template data-template-id="form-success">
        <img src="/images/valide.svg" class="w-16" alt="">
        <p class="text-center w-44 mx-auto">Votre inscription a bien été effectuée</p>

        <button type="button" data-close-dialog class="bg-green-numixs w-fit rounded-md px-16 py-3.5 mx-auto block mt-8 active:bg-dark-green-numixs">Continuer</button>
    </template>
    <template data-template-id="form-error">
        <img src="/images/valide.svg" class="w-16" alt="">
        <p class="text-center w-44 mx-auto">Une erreur est survenue lors de votre inscription</p>

        <button type="button" data-close-dialog class="bg-green-numixs w-fit rounded-md px-16 py-3.5 mx-auto block mt-8 active:bg-dark-green-numixs">Continuer</button>
    </template>
{% endblock %}
